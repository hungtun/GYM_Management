{% if membership %}
<div class="alert alert-info mb-3">
    <h6><strong>Gói hiện tại:</strong> {{ membership.package.name }}</h6>
    <p class="mb-1"><strong>Bắt đầu:</strong> {{ membership.start_date.strftime('%d/%m/%Y') }}</p>
    <p class="mb-1"><strong>Hết hạn:</strong> {{ membership.end_date.strftime('%d/%m/%Y') if membership.end_date else 'N/A' }}</p>
    {% if membership.end_date %}
        {% set days_left = (membership.end_date.date() - now().date()).days %}
        {% if days_left > 0 %}
            <p class="mb-0 text-success"><strong>Còn lại:</strong> {{ days_left }} ngày</p>
        {% else %}
            <p class="mb-0 text-danger"><strong>Trạng thái:</strong> Đã hết hạn</p>
        {% endif %}
        {% endif %}
</div>
{% else %}
<div class="alert alert-warning mb-3">Chưa có gói tập đang hoạt động</div>
{% endif %}

{% if all_memberships %}
<h6 class="mt-3 mb-2">Tất cả các gói tập:</h6>
<div class="table-responsive">
    <table class="table table-sm table-striped">
        <thead>
            <tr>
                <th>Gói tập</th>
                <th>Thời hạn</th>
                <th>Ngày bắt đầu</th>
                <th>Ngày hết hạn</th>
                <th>Trạng thái</th>
            </tr>
        </thead>
        <tbody>
            {% for m in all_memberships %}
            <tr>
                <td><strong>{{ m.package.name }}</strong></td>
                <td>{{ m.package.duration_months }} tháng</td>
                <td>{{ m.start_date.strftime('%d/%m/%Y') if m.start_date else 'N/A' }}</td>
                <td>{{ m.end_date.strftime('%d/%m/%Y') if m.end_date else 'N/A' }}</td>
                <td>
                    {% if m.active %}
                        <span class="badge bg-success">Đang hoạt động</span>
                    {% else %}
                        {% if m.start_date.date() > now().date() %}
                            <span class="badge bg-warning">Chờ kích hoạt</span>
                        {% else %}
                            <span class="badge bg-secondary">Đã kết thúc</span>
                        {% endif %}
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}
